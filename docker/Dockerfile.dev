# AASX Server Blazor UI Development Dockerfile (Standalone)
# For development and debugging purposes
# Modified version of the original AASX Package Explorer

FROM mcr.microsoft.com/dotnet/sdk:8.0

# Set working directory
WORKDIR /src

# Copy the entire server source code
COPY . .

# Set working directory to the Blazor project
WORKDIR /src/src

# Restore dependencies
RUN dotnet restore AasxServerBlazor/AasxServerBlazor.csproj

# Expose port
EXPOSE 5001

# Set environment variables for development
ENV ASPNETCORE_URLS=http://+:5001
ENV ASPNETCORE_ENVIRONMENT=Development
ENV AASX_DATA_PATH=./data
ENV AASX_SERVER_PORT=5001

# Create data directory
RUN mkdir -p /app/data

# Start the application in development mode
CMD ["dotnet", "run", "--project", "AasxServerBlazor/AasxServerBlazor.csproj", "--no-security", "--data-path", "./data", "--external-blazor", "http://localhost:5001"] 